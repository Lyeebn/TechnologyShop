<!DOCTYPE html>
<html>
<head>	<meta charset="utf-8"/>
	<title>å°†æŒ‘é¢˜ç¨¿ã€å…¨é€‰Ctrl + Aã€‘å¤åˆ¶åˆ°ä¸‹é¢æ¡†ä¸­å³å¯æç‚¼æŒ‘é¢˜æ ‡è®° ğŸ¢ LaTeX</title>
	<style id="csse">
	body {background-color:unset!important}
	h1 {background-color:red;}
	h2 {background-color:cyan;}
	h3 {background-color:gray;}
	h4 {color:purple;}
	.op {text-align: center;background-color:pink;zoom:2; position:fixed; width:100%;top:0px;left:0px}
	textarea {width:98vw;height:25em;margin-top:4em}
	table,table  td{ border: 1px solid #555; }
	table td{ padding: 5px; }
	tr:hover{background-color:gray}
	</style>
</head>
<body>
<div class="op">
<a target="_blank" href="https://note.youdao.com/noteshare?id=9eef0aa66ac46541c5fbae70df912eba"> æŒ‘é¢˜é¡»çŸ¥</a>
<button onclick="result.innerHTML=document.title"> å¸®åŠ© </button>
<a onclick="tx.click()" style="zoom:0.5;display:inline-block">æ˜¯å¦è¾“å‡º <br/>é¢˜ç›®ç±»å‹ï¼š</a><input id="tx" type="checkbox" onchange="ç®—()" title="æ˜¯å¦ä¸ºä¾‹" />
<button onclick="å¤åˆ¶()"> ä¸€é”®å¤åˆ¶å…¨éƒ¨æŒ‘é¢˜æ ‡è®° </button>
<span style="zoom:0.6;">
<button onclick="ä¸‹HTML();" titie="ä¸‹æ–‡ä»¶">å­˜</button>
<button onclick="ç®—();" titie="æç‚¼ã€æŒ‘é¢˜æ ‡è®°ã€‘ä¸€èˆ¬å·²ç»è‡ªåŠ¨æç‚¼äº†">æç‚¼</button>
<button onclick="ç”Ÿæˆå¢é¢˜ID()"> ç”Ÿæˆå¢é¢˜ID </button>
<button onclick="window.location.reload()" title="æˆ–ã€Ctrl + F5ã€‘ï¼Œè·å–æ›´æ–°åŠŸèƒ½ï¼Œä¿®å¤ bug"> å¼ºåˆ¶åˆ·æ–° </button>
</span>
</div>
<textarea id="txt" rows="5" autofocus="autofocus" placeholder="å°†æŒ‘é¢˜ç¨¿å…¨é€‰ã€Ctrl + Aã€‘å¤åˆ¶ã€Ctrl + Cã€‘ç²˜è´´ã€Ctrl + Vã€‘è¿‡æ¥å³å¯æç‚¼ã€æŒ‘é¢˜IDã€‘" oninput="ç®—()" onchange="ç®—()" ></textarea>

<div id="result"><h1>ç”¨ Chorme æµè§ˆå™¨æ‰“å¼€æŒ‘é¢˜ç¨¿<p/>ç„¶åã€å…¨é€‰ Ctrl + Aã€‘å¤åˆ¶åˆ°ä¸‹é¢æ¡†ä¸­å³å¯æç‚¼æŒ‘é¢˜æ ‡è®°</h1></div>
<script type="text/javascript">
va = document.createElement("a");
function ä¸‹HTML(){
	va.download = `æŒ‘ã€Š${ä¹¦å||'ä¹¦å'}ã€‹.html`  // ä¸‹è½½æ–‡ä»¶å
	va.href= 'data:text/plain;charset=utf-8,' + encodeURIComponent(csse.outerHTML+result.innerHTML)
	va.click() ; }
c = console.log

cm=`å°â¼©
å‡ â¼
é¡µâ»š
ä¸€â¼€
äºŒâ¼†
å…«â¼‹
åâ¼—` // äº‘

function ç®—(){
	q = txt.value; w = ''; // e = '';
 	cm.split('\n').forEach(x=>{q=q.replace(RegExp(x[1],'g'), x[0])})
	ä¹¦å = q.match(/^\d+ *[å¯’æ˜¥æš‘ç§‹].+$/m)
	ä¹¦å = ä¹¦å? ä¹¦å[0]: 'æœªçŸ¥ä¹¦å';
	q = q.replace(/^.{5,600}\. \. \. \. \. \. \. .{20,3000}\. \. \. \. \. \. \. \d+\n/s, '').replace(/å¿«ä¹å­¦ä¹ .+?LATEX=/s, '')
	q = q.replace(/^.{5,999}\. \. \. \. \d+\n/s, '') // åˆ ç›®å½•ï¼Œä¸ä¸¥è°¨
	q = q.replace(/\s*ã€åŸã€‘/g, '\nã€åŸã€‘') // .replace(/çŸ¥è¯†æ¨¡å—/g, 'è€ƒç‚¹')
	q = q.replace(/(ç¬¬[é›¶ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åç™¾â¼€â¼†â¼‹â¼—]+éƒ¨åˆ†.+)/m, '<h1>$1</h1>')
	.replace(/(ç¬¬[é›¶ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åç™¾]+ç« .+)/gm, '<h2>$1</h2>')
	.replace(/((jie\d+ *)?ç¬¬[ä¸€-é›¶]+èŠ‚.+)/gm, '<h3>$1</h3>')
	.replace(/(è¯¾åä½œä¸š|æ€ç»´æ‹“å±•|éšå ‚ç»ƒä¹ |å…¸ä¾‹ç²¾æ|é«˜è€ƒçœŸé¢˜|æœ¬èŠ‚å°ç»“|ç²¾è®²ç²¾ç»ƒ|å°æ ‡é¢˜ç»„.+)/gm, '<h4>$1</h4>')
	.replace(/(ã€åŸã€‘.+xxmb=\d+)/gm, '<h5>$1</h5>')
	.replace(/^(è€ƒç‚¹[é›¶ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åç™¾]+ *.+)/gm, '<h4>$1</h4>')
	.replace(/(ã€åŸã€‘.+ZSQD=\d+)/gm, '<h5>$1</h5>')
	.replace(/(ã€åŸã€‘.+ID=\d+)/gm, '<h5>$1</h5>')
	//.replace(/^[^<].+$/gm, '')
	q.replace(/<h\d>.+<\/h\d>/gm, x => {w += x + '\n'})
	// w.replace(/<h[1-3]>.+<\/h[1-3]>/gm, x => {e += x + '\n'})
	if (tx.checked) {w=w.replace(/(ã€åŸã€‘.+?ä¾‹)/gm,'ä¾‹é¢˜$1').replace(/(ã€åŸã€‘.+?[ç»ƒä½œ])/gm,'ç»ƒä¹ $1')}
	result.innerHTML = `<h1>${ä¹¦å}</h1>\n` + w.replace(/h5>/gm, 'p>')
};
// ç®—()

function å¤åˆ¶() {
	window.getSelection().removeAllRanges();
	var range = document.createRange();
	range.selectNodeContents(result);
	window.getSelection().addRange(range);
	document.execCommand('copy')
}

function ç”Ÿæˆå¢é¢˜ID() { z='<h3>ä¾›æ–°é¢˜ç¼–å·ï¼Œä»¥ä¾¿ç»™æœ¬å°‘æ’å…¥</h3>';
	for (i=1;i<256;i++) {z+= `\nğŸ”¥${i}<p/>`};
	result.innerHTML = z }
</script>
</body>
</html>
